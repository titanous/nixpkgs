# Derived from https://sources.debian.org/src/qcustomplot/2.0.1+dfsg1-4/CMakeLists.txt/

PROJECT(qcustomplot CXX)
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

SET(Q_MAJOR_VERSION "2")
SET(Q_MINOR_VERSION "0")
SET(Q_PATCH_VERSION "1")

INCLUDE(GNUInstallDirs)

find_package(Qt5 COMPONENTS Widgets PrintSupport REQUIRED)
INCLUDE_DIRECTORIES(${Qt5Widgets_INCLUDE_DIRS} /usr/include/qt5/QtPrintSupport)
ADD_DEFINITIONS(${Qt5Widgets_DEFINITIONS} -DQCUSTOMPLOT_COMPILE_LIBRARY)
set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTORCC ON)
set(CMAKE_AUTOUIC ON)

set(Q_VERSION "${Q_MAJOR_VERSION}.${Q_MINOR_VERSION}.${Q_PATCH_VERSION}")
set(Q_SOVERSION "${Q_MAJOR_VERSION}.${Q_MINOR_VERSION}")

ADD_LIBRARY(qcustomplot SHARED qcustomplot.cpp)

SET_TARGET_PROPERTIES(qcustomplot PROPERTIES
	  VERSION ${Q_VERSION}
	    SOVERSION ${Q_SOVERSION})
    TARGET_LINK_LIBRARIES(qcustomplot Qt5::Widgets Qt5::PrintSupport)

    INSTALL(TARGETS qcustomplot DESTINATION "${CMAKE_INSTALL_LIBDIR}")
    INSTALL(FILES qcustomplot.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}")
